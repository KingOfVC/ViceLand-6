class CJob
{
	Pizza_pos = 
	[
		"587.795044,861.121765,18.983547",
		"481.267883,31.476292,10.591743",
		"555.766113,1.087758,13.821465",
		"495.481567,-82.809830,9.553442",
		"532.887451,-114.173935,10.267475",
		"543.832458,-196.906921,13.349616",
		"538.648193,95.478539,10.710301",
		"482.092255,195.802429,10.714980",
		"382.518311,250.422058,10.732871",
		"299.137909,290.746643,16.808542",
		"347.240173,364.571869,10.720667",
		"436.597412,324.712097,11.157195",
		"308.036316,377.280121,12.732173",
		"421.401123,643.067505,10.828330",
		"445.550934,773.090820,12.476222",
		"496.553925,701.067261,11.622197",
		"567.336853,711.053528,12.853324",
		"550.637451,990.609741,20.576429",
		"531.001404,1168.429077,18.488918",
		"529.901794,1272.812256,17.373562",
		"426.178009,1305.382690,19.264854",
		"371.655518,1303.117188,19.415789",
		"266.425873,1298.393066,16.924353",
		"301.164185,753.233337,12.456114",
		"72.435837,1080.396484,15.724351",
		"17.178097,1141.571777,19.097683",
		"-29.984816,1114.770752,14.714475",
		"-76.399429,933.850586,10.429506",
		"-410.903076,1112.844971,10.590631",
		"-467.250854,1072.762573,10.588469",
		"-560.533813,1166.890503,10.859016",
		"-828.996460,1305.406982,11.090727",
		"-755.867371,1337.781494,11.285506",
		"-705.498596,1493.983398,11.605912",
		"-831.312744,1038.916138,15.273723",
		"-871.778687,750.475159,10.604516",
		"-895.151123,326.577515,10.772507",
		"-977.761108,332.989807,10.780336",
		"-1054.718506,-56.126045,10.720917",
		"-1055.216675,-81.679024,10.659554",
		"-1158.542725,-65.479080,10.964904",
		"-1200.155029,-212.205978,10.965178",
		"-1164.500977,-356.671692,10.381175",
		"-1113.304321,-451.573090,9.864588",
		"-971.202148,-241.152023,10.454271",
		"-1002.154480,-201.681610,10.495942",
		"-970.867065,-125.146729,10.652549",
		"-995.436401,-65.936203,10.384206",
		"-951.490723,-653.236877,10.805449",
		"-1142.827515,-509.628998,10.551732",
		"-910.167908,-1037.631348,14.318964",
		"-993.744263,-1155.750122,14.211455",
		"-827.423096,-1109.479858,10.624585",
		"-810.981262,-1162.323364,10.616813",
		"-796.557861,-1197.964111,10.608004",
		"-791.260437,-1214.165161,10.620869",
		"-842.909973,-766.661255,12.168127",
		"-123.335144,-1062.118652,13.596198",
		"-204.823090,-1097.635376,13.589065",
		"-151.475510,-1137.782837,13.002038",
		"-125.114273,-1384.416016,9.982007",
		"-103.548195,-1603.543213,9.880919",
		"-14.412153,-1510.197021,9.969406",
		"16.655041,-1500.079102,12.765107",
		"63.486881,-1345.837402,9.977019",
		"36.766273,-1312.523193,9.981907",
		"232.386902,-1277.946655,11.596740",
		"244.470871,-1242.556030,10.590521",
		"311.856415,-903.989258,10.573584",
		"368.142670,-780.061157,10.577113",
		"482.439087,-509.722717,10.610078",
		"273.178986,-359.138672,11.478484",
		"127.308006,-520.460449,13.246931",
		"147.217239,-593.962341,13.232896",
		"105.035408,-581.425537,13.249071",
		"30.696426,-536.436890,13.213181",
		"-498.751648,-470.583344,11.022964",
		"-575.017334,-459.673492,10.806787",
		"-644.921692,-404.521393,10.794617",
		"-526.940002,-304.685394,10.320497",
		"-377.301666,-337.943085,10.732165",
		"196.003265,-414.577637,10.589951",
		"231.287582,-224.029007,11.346136",
		"267.249512,-153.146698,11.349100",
		"332.868988,-111.101120,11.261567",
		"318.195312,3.572387,10.523873",
		"275.566193,8.779828,10.577481",
		"268.105469,47.731342,10.336361",
	]
	
	function AddPizzaPickup( player )
	{
		local get_player_id = player.Data.AccID + " " + player.ID, get_pos = this.Pizza_pos[ rand()%Pizza_pos.len() ];
		
		SqJob.RemoveAllPizzaPickup( player );

		SqPick.CreateForPlayer( get_player_id, 510, Vector3.FromStr( get_pos ), player.UniqueWorld, "Pizza", "" );
		
		SqMarker.CreateForPlayer( get_player_id, 0, Vector3.FromStr( get_pos ), 1.5, player.UniqueWorld, Color4( 255, 0, 255, 255 ) );
		
		player.Msg( TextColor.InfoS, Lang.DeliverNext[ player.Data.Language ] );
	}
	
	function RemoveAllPizzaPickup( player )
	{
		local get_player_id = player.Data.AccID + " " + player.ID;

		SqForeach.Pickup.Active(this, function( Pickup )
		{
			if( SqPick.Pickups.rawin( Pickup.Tag ) )
			{
				if( SqPick.Pickups[ Pickup.Tag ].Type == "Pizza" && SqPick.Pickups[ Pickup.Tag ].LastEdited == get_player_id )
				{
					SqPick.Pickups.rawdelete( Pickup.Tag );

					Pickup.Destroy();
				}
			}
		});
		
		SqForeach.Blip.Active(this, function( Blip )
		{			
			if( Blip.Tag == get_player_id )
			{
				SqMarker.Blips.rawdelete( Blip.Tag );

				Blip.Destroy();
			}
		});
	}
	
	function DestroyJob( player )
	{
		if( player.Data.Job.rawin( "Pizza" ) )
		{
			SqJob.RemoveAllPizzaPickup( player );
			
			player.Data.Job = {};
		}
	}

	function GetPizzateriaPoint( player )
	{
		local result = null;

		SqForeach.Pickup.Active(this, function( Pickup )
		{
			if( SqPick.Pickups.rawin( Pickup.Tag ) )
			{
				if( SqPick.Pickups[ Pickup.Tag ].Type == "RestockPizza" )
				{
					if( Pickup.Pos.DistanceTo( player.Pos ) < 5 ) 
					{
						result = true;
					}
				}
			}
		});

		return result;
	}
}